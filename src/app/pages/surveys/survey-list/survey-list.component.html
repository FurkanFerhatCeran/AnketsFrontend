<!-- src/app/pages/surveys/survey-list/survey-list.component.html -->
<div class="survey-list-container">
    <div class="header-section">
        <div class="header-content">
            <div class="header-text">
                <h1 class="main-title">
                    <span class="title-icon">ğŸ“Š</span>
                    Anketlerim
                </h1>
                <p class="subtitle">Anketlerinizi oluÅŸturun, yÃ¶netin ve analiz edin</p>
            </div>
            
            <div class="header-actions">
                <button class="btn-create" (click)="navigateToCreate()">
                    <span class="btn-icon">âœ¨</span>
                    Yeni Anket OluÅŸtur
                </button>
            </div>
        </div>
        
        <div class="stats-bar" *ngIf="surveys.length > 0">
            <div class="stat-item">
                <span class="stat-number">{{ surveys.length }}</span>
                <span class="stat-label">Toplam Anket</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ getActiveCount() }}</span>
                <span class="stat-label">Aktif Anket</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ getTotalResponses() }}</span>
                <span class="stat-label">Toplam YanÄ±t</span>
            </div>
        </div>
    </div>

    <div class="content-section">
        <div class="surveys-grid" *ngIf="surveys.length > 0; else emptySurveys">
            <div
                *ngFor="let survey of surveys; trackBy: trackBySurvey"
                class="survey-card"
                [class.inactive]="!survey.isActive">
                
                <div class="card-header">
                    <div class="survey-badge" [class.active]="survey.isActive">
                        <span class="badge-icon">{{ survey.isActive ? 'ğŸŸ¢' : 'ğŸ”´' }}</span>
                        <span class="badge-text">{{ survey.isActive ? 'Aktif' : 'Pasif' }}</span>
                    </div>
                    
                    <div class="header-actions">
                        <button 
                            class="quick-action-btn delete" 
                            (click)="confirmDelete(survey)"
                            title="HÄ±zlÄ± Sil">
                            <span class="btn-icon">ğŸ—‘ï¸</span>
                        </button>
                        
                        <button 
                            class="quick-action-btn menu" 
                            (click)="toggleDropdown(survey.surveyId)"
                            title="MenÃ¼">
                            <span class="dots">â‹®</span>
                        </button>
                    </div>
                </div>

                <div class="card-content">
                    <h3 class="survey-title">{{ survey.title }}</h3>
                    <p class="survey-description" *ngIf="survey.description">
                        {{ survey.description }}
                    </p>
                    
                    <div class="survey-stats">
                        <div class="stat-chip">
                            <span class="chip-icon">â“</span>
                            <span class="chip-text">{{ getQuestionCount(survey) }} soru</span>
                        </div>
                        
                        <div class="stat-chip" *ngIf="getResponseCount(survey.surveyId) > 0">
                            <span class="chip-icon">ğŸ’¬</span>
                            <span class="chip-text">{{ getResponseCount(survey.surveyId) }} yanÄ±t</span>
                        </div>
                        
                        <div class="stat-chip">
                            <span class="chip-icon">ğŸ“…</span>
                            <span class="chip-text">{{ formatDate(survey.createdAt) }}</span>
                        </div>
                    </div>
                </div>

                <div class="card-actions">
                    <button 
                        class="action-btn preview" 
                        (click)="navigateToView(survey.surveyId)" 
                        title="Anketi Ã–nizle">
                        <span class="btn-icon">ğŸ‘ï¸</span>
                        <span class="btn-text">Ã–nizle</span>
                    </button>
                    
                    <button 
                        class="action-btn edit" 
                        (click)="navigateToEdit(survey.surveyId)" 
                        title="DÃ¼zenle">
                        <span class="btn-icon">âœï¸</span>
                        <span class="btn-text">DÃ¼zenle</span>
                    </button>
                    
                    <button 
                        class="action-btn stats" 
                        (click)="navigateToResults(survey.surveyId)" 
                        title="Ä°statistikler">
                        <span class="btn-icon">ğŸ“Š</span>
                        <span class="btn-text">Ä°statistik</span>
                    </button>
                    
                    <div class="action-dropdown" [class.open]="activeDropdown === survey.surveyId">
                        <button 
                            class="action-btn more" 
                            (click)="toggleDropdown(survey.surveyId)"
                            title="Daha Fazla SeÃ§enek">
                            <span class="btn-icon">âš™ï¸</span>
                            <span class="btn-text">DiÄŸer</span>
                        </button>
                        
                        <div class="dropdown-menu" [class.open]="activeDropdown === survey.surveyId">
                            <button (click)="shareSurvey(survey)" class="dropdown-item">
                                <span class="item-icon">ğŸ”—</span>
                                <span class="item-text">PaylaÅŸ</span>
                            </button>
                            
                            <button (click)="duplicateSurvey(survey)" class="dropdown-item">
                                <span class="item-icon">ğŸ“‹</span>
                                <span class="item-text">Kopyala</span>
                            </button>
                            
                            <button (click)="toggleSurveyStatus(survey)" class="dropdown-item">
                                <span class="item-icon">{{ survey.isActive ? 'â¸ï¸' : 'â–¶ï¸' }}</span>
                                <span class="item-text">{{ survey.isActive ? 'Duraklat' : 'AktifleÅŸtir' }}</span>
                            </button>
                            
                            <button (click)="exportSurvey(survey)" class="dropdown-item">
                                <span class="item-icon">ğŸ“¥</span>
                                <span class="item-text">DÄ±ÅŸa Aktar</span>
                            </button>
                            
                            <div class="dropdown-divider"></div>
                            
                            <button (click)="confirmDelete(survey)" class="dropdown-item danger">
                                <span class="item-icon">ğŸ—‘ï¸</span>
                                <span class="item-text">Sil</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="response-overview" *ngIf="getResponseCount(survey.surveyId) > 0">
                    <div class="response-bar">
                        <div class="response-fill" [style.width.%]="getCompletionRate(survey.surveyId)"></div>
                    </div>
                    <div class="response-text">
                        <span class="response-count">{{ getResponseCount(survey.surveyId) }} yanÄ±t alÄ±ndÄ±</span>
                        <span class="response-rate">%{{ getCompletionRate(survey.surveyId) }} tamamlanma</span>
                    </div>
                </div>
            </div>
        </div>

        <ng-template #emptySurveys>
            <div class="empty-state">
                <div class="empty-illustration">
                    <div class="empty-icon">ğŸ“‹</div>
                    <div class="empty-sparkles">âœ¨</div>
                </div>
                
                <div class="empty-content">
                    <h3 class="empty-title">Ä°lk anketinizi oluÅŸturun!</h3>
                    <p class="empty-description">
                        KullanÄ±cÄ±larÄ±nÄ±zdan deÄŸerli geri bildirimler alÄ±n ve 
                        verilerle desteklenen kararlar alÄ±n.
                    </p>
                    
                    <div class="empty-actions">
                        <button class="btn-create-empty" (click)="navigateToCreate()">
                            <span class="btn-icon">ğŸš€</span>
                            <span class="btn-text">Ä°lk Anketimi OluÅŸtur</span>
                        </button>
                        
                        <button class="btn-secondary-empty" (click)="showHelp()">
                            <span class="btn-icon">ğŸ“–</span>
                            <span class="btn-text">NasÄ±l BaÅŸlarÄ±m?</span>
                        </button>
                    </div>
                </div>
            </div>
        </ng-template>
    </div>

    <div class="toast-container">
        <div class="toast success" *ngIf="showSuccessMessage">
            <div class="toast-content">
                <span class="toast-icon">âœ…</span>
                <span class="toast-message">{{ successMessage }}</span>
            </div>
            <button class="toast-close" (click)="showSuccessMessage = false">Ã—</button>
        </div>
    </div>
</div>

<div class="delete-confirmation-overlay" *ngIf="showDeleteModal">
    <div class="delete-modal">
        <span class="modal-icon">âš ï¸</span>
        <h3 class="modal-title">Anketi Sil</h3>
        <p class="modal-message">
            "<strong>{{ surveyToDelete?.title }}</strong>" anketini silmek istediÄŸinizden emin misiniz? 
            <br>Bu iÅŸlem geri alÄ±namaz ve tÃ¼m yanÄ±tlar silinecektir.
        </p>
        <div class="modal-actions">
            <button class="btn-cancel" (click)="cancelDelete()">Ä°ptal</button>
            <button class="btn-delete" (click)="executeDelete()">Evet, Sil</button>
        </div>
    </div>
</div>