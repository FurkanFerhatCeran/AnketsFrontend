<!-- Profile SayfasÄ± HTML Template -->
<div class="profile-container">
  <!-- Loading Spinner -->
  <div class="loading-overlay" *ngIf="isLoading">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>YÃ¼kleniyor...</p>
    </div>
  </div>

  <!-- Success Message -->
  <div class="success-message" *ngIf="showSuccessMessage">
    <div class="message-content">
      <span class="message-icon">âœ…</span>
      <span class="message-text">{{ successMessage }}</span>
    </div>
  </div>

  <!-- Error Message -->
  <div class="error-message" *ngIf="showErrorMessage">
    <div class="message-content">
      <span class="message-icon">âŒ</span>
      <span class="message-text">{{ errorMessage }}</span>
    </div>
  </div>

  <!-- Header Section -->
  <div class="profile-header">
    <h1>Profil Bilgilerim</h1>
    <p class="subtitle">Hesap bilgilerinizi gÃ¶rÃ¼ntÃ¼leyin ve gÃ¼ncelleyin</p>
  </div>

  <!-- Profile Content -->
  <div class="profile-content">
    <!-- Personal Info Card -->
    <div class="profile-card">
      <div class="card-header">
        <div class="avatar-section">
          <div class="user-avatar">
            <img *ngIf="userProfile.avatar" [src]="userProfile.avatar" [alt]="getUserDisplayName()">
            <span *ngIf="!userProfile.avatar">{{ getUserInitials() }}</span>
          </div>
          <div class="avatar-info">
            <h3>{{ getUserDisplayName() }}</h3>
            <span class="user-role">{{ getUserRole() }}</span>
            <span class="user-email" *ngIf="userProfile.email">{{ userProfile.email }}</span>
          </div>
        </div>
        <button class="btn-edit-avatar" (click)="changeAvatar()" [disabled]="isLoading">
          <span class="icon">ğŸ“·</span>
          FotoÄŸraf DeÄŸiÅŸtir
        </button>
      </div>

      <div class="card-content">
        <form (ngSubmit)="updateProfile()" #profileForm="ngForm">
          <div class="form-group">
            <label for="nameSurname">Ad Soyad *</label>
            <input 
              id="nameSurname" 
              type="text" 
              [(ngModel)]="userProfile.nameSurname" 
              name="nameSurname" 
              required 
              maxlength="50"
              class="form-control"
              placeholder="AdÄ±nÄ±z ve soyadÄ±nÄ±z">
          </div>

          <div class="form-group">
            <label for="email">E-posta</label>
            <input 
              id="email" 
              type="email" 
              [(ngModel)]="userProfile.email" 
              name="email" 
              class="form-control"
              readonly>
            <small class="form-help">E-posta adresi deÄŸiÅŸtirilemez</small>
          </div>

          <div class="form-group">
            <label for="phone">Telefon</label>
            <input 
              id="phone" 
              type="tel" 
              [(ngModel)]="userProfile.phone" 
              name="phone" 
              maxlength="15"
              class="form-control"
              placeholder="+90 555 123 4567">
          </div>

          <div class="form-group">
            <label for="bio">HakkÄ±mda</label>
            <textarea 
              id="bio" 
              [(ngModel)]="userProfile.bio" 
              name="bio" 
              class="form-control" 
              rows="4"
              maxlength="500"
              placeholder="Kendiniz hakkÄ±nda kÄ±sa bir aÃ§Ä±klama yazÄ±n..."></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary" [disabled]="!profileForm.valid || isLoading">
              <span class="icon">ğŸ’¾</span>
              {{ isLoading ? 'Kaydediliyor...' : 'DeÄŸiÅŸiklikleri Kaydet' }}
            </button>
            <button type="button" class="btn-secondary" (click)="resetForm()" [disabled]="isLoading">
              <span class="icon">â†º</span>
              SÄ±fÄ±rla
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Security Card -->
    <div class="profile-card">
      <div class="card-header">
        <h3>ğŸ”’ GÃ¼venlik</h3>
        <p>Åifre ve gÃ¼venlik ayarlarÄ±nÄ±zÄ± gÃ¼ncelleyin</p>
      </div>

      <div class="card-content">
        <form (ngSubmit)="changePassword()" #passwordForm="ngForm">
          <div class="form-group">
            <label for="currentPassword">Mevcut Åifre *</label>
            <input 
              id="currentPassword" 
              type="password" 
              [(ngModel)]="passwordData.currentPassword" 
              name="currentPassword" 
              required 
              class="form-control">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="newPassword">Yeni Åifre *</label>
              <input 
                id="newPassword" 
                type="password" 
                [(ngModel)]="passwordData.newPassword" 
                name="newPassword" 
                required 
                minlength="6"
                class="form-control">
            </div>
            <div class="form-group">
              <label for="confirmPassword">Åifre Tekrar *</label>
              <input 
                id="confirmPassword" 
                type="password" 
                [(ngModel)]="passwordData.confirmPassword" 
                name="confirmPassword" 
                required 
                class="form-control">
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary" [disabled]="!passwordForm.valid || isLoading">
              <span class="icon">ğŸ”</span>
              {{ isLoading ? 'DeÄŸiÅŸtiriliyor...' : 'Åifreyi DeÄŸiÅŸtir' }}
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Statistics Card (Opsiyonel) -->
    <div class="profile-card" *ngIf="userStats">
      <div class="card-header">
        <h3>ğŸ“Š Hesap Ä°statistikleri</h3>
        <p>Anket aktivitelerinizin Ã¶zeti</p>
      </div>

      <div class="card-content">
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-icon">ğŸ“‹</div>
            <div class="stat-info">
              <span class="stat-number">{{ getTotalSurveys() }}</span>
              <span class="stat-label">Toplam Anket</span>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">âœ…</div>
            <div class="stat-info">
              <span class="stat-number">{{ getActiveSurveys() }}</span>
              <span class="stat-label">Aktif Anket</span>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">ğŸ“¨</div>
            <div class="stat-info">
              <span class="stat-number">{{ getTotalResponses() }}</span>
              <span class="stat-label">Toplam YanÄ±t</span>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">ğŸ“…</div>
            <div class="stat-info">
              <span class="stat-number">{{ getDaysActive() }}</span>
              <span class="stat-label">Aktif GÃ¼n</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>