<!-- Profile SayfasÄ± HTML Template -->
<div class="profile-container">
  <!-- Loading Spinner -->
  <div class="loading-overlay" *ngIf="isLoading">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>YÃ¼kleniyor...</p>
    </div>
  </div>

  <!-- Success Message -->
  <div class="success-message" *ngIf="showSuccessMessage">
    <div class="message-content">
      <span class="message-icon">âœ…</span>
      <span class="message-text">{{ successMessage }}</span>
    </div>
  </div>

  <!-- Error Message -->
  <div class="error-message" *ngIf="showErrorMessage">
    <div class="message-content">
      <span class="message-icon">âŒ</span>
      <span class="message-text">{{ errorMessage }}</span>
    </div>
  </div>

  <!-- Header Section -->
  <div class="profile-header">
    <h1>Profil Bilgilerim</h1>
    <p class="subtitle">Hesap bilgilerinizi gÃ¶rÃ¼ntÃ¼leyin ve gÃ¼ncelleyin</p>
  </div>

  <!-- Profile Content -->
  <div class="profile-content">
    <!-- Personal Info Card -->
    <div class="profile-card">
      <div class="card-header">
        <div class="avatar-section">
          <div class="user-avatar">
            {{ getUserInitials() }}
          </div>
          <div class="avatar-info">
            <h3>{{ getUserDisplayName() }}</h3>
            <span class="user-role">{{ getUserRole() }}</span>
          </div>
        </div>
        <button class="btn-edit-avatar" (click)="changeAvatar()">
          <span class="icon">ğŸ“·</span>
          FotoÄŸraf DeÄŸiÅŸtir
        </button>
      </div>

      <div class="card-content">
        <form (ngSubmit)="updateProfile()" #profileForm="ngForm">
          <div class="form-row">
            <div class="form-group">
              <label for="firstName">Ad</label>
              <input 
                id="firstName" 
                type="text" 
                [(ngModel)]="userProfile.firstName" 
                name="firstName" 
                required 
                class="form-control">
            </div>
            <div class="form-group">
              <label for="lastName">Soyad</label>
              <input 
                id="lastName" 
                type="text" 
                [(ngModel)]="userProfile.lastName" 
                name="lastName" 
                required 
                class="form-control">
            </div>
          </div>

          <div class="form-group">
            <label for="email">E-posta</label>
            <input 
              id="email" 
              type="email" 
              [(ngModel)]="userProfile.email" 
              name="email" 
              required 
              class="form-control"
              readonly>
            <small class="form-help">E-posta adresi deÄŸiÅŸtirilemez</small>
          </div>

          <div class="form-group">
            <label for="phone">Telefon</label>
            <input 
              id="phone" 
              type="tel" 
              [(ngModel)]="userProfile.phone" 
              name="phone" 
              class="form-control">
          </div>

          <div class="form-group">
            <label for="bio">HakkÄ±mda</label>
            <textarea 
              id="bio" 
              [(ngModel)]="userProfile.bio" 
              name="bio" 
              class="form-control" 
              rows="4"
              placeholder="Kendiniz hakkÄ±nda kÄ±sa bir aÃ§Ä±klama yazÄ±n..."></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary" [disabled]="!profileForm.valid || isLoading">
              <span class="icon">ğŸ’¾</span>
              {{ isLoading ? 'Kaydediliyor...' : 'DeÄŸiÅŸiklikleri Kaydet' }}
            </button>
            <button type="button" class="btn-secondary" (click)="resetForm()" [disabled]="isLoading">
              <span class="icon">â†º</span>
              SÄ±fÄ±rla
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Security Card -->
    <div class="profile-card">
      <div class="card-header">
        <h3>ğŸ”’ GÃ¼venlik</h3>
        <p>Åifre ve gÃ¼venlik ayarlarÄ±nÄ±zÄ± gÃ¼ncelleyin</p>
      </div>

      <div class="card-content">
        <form (ngSubmit)="changePassword()" #passwordForm="ngForm">
          <div class="form-group">
            <label for="currentPassword">Mevcut Åifre</label>
            <input 
              id="currentPassword" 
              type="password" 
              [(ngModel)]="passwordData.currentPassword" 
              name="currentPassword" 
              required 
              class="form-control">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="newPassword">Yeni Åifre</label>
              <input 
                id="newPassword" 
                type="password" 
                [(ngModel)]="passwordData.newPassword" 
                name="newPassword" 
                required 
                class="form-control">
            </div>
            <div class="form-group">
              <label for="confirmPassword">Åifre Tekrar</label>
              <input 
                id="confirmPassword" 
                type="password" 
                [(ngModel)]="passwordData.confirmPassword" 
                name="confirmPassword" 
                required 
                class="form-control">
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary" [disabled]="!passwordForm.valid || isLoading">
              <span class="icon">ğŸ”</span>
              {{ isLoading ? 'DeÄŸiÅŸtiriliyor...' : 'Åifreyi DeÄŸiÅŸtir' }}
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Account Stats Card -->
    <div class="profile-card">
      <div class="card-header">
        <h3>ğŸ“Š Hesap Ä°statistikleri</h3>
        <p>Anket aktivitelerinizin Ã¶zeti</p>
      </div>

      <div class="card-content">
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-icon">ğŸ“‹</div>
            <div class="stat-info">
              <span class="stat-number">{{ getTotalSurveys() }}</span>
              <span class="stat-label">Toplam Anket</span>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">âœ…</div>
            <div class="stat-info">
              <span class="stat-number">{{ getActiveSurveys() }}</span>
              <span class="stat-label">Aktif Anket</span>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">ğŸ“¨</div>
            <div class="stat-info">
              <span class="stat-number">{{ getTotalResponses() }}</span>
              <span class="stat-label">Toplam YanÄ±t</span>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">ğŸ“…</div>
            <div class="stat-info">
              <span class="stat-number">{{ getDaysActive() }}</span>
              <span class="stat-label">Aktif GÃ¼n</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Danger Zone Card -->
    <div class="profile-card danger-zone">
      <div class="card-header">
        <h3>âš  Tehlikeli BÃ¶lge</h3>
        <p>Bu iÅŸlemler geri alÄ±namaz</p>
      </div>

      <div class="card-content">
        <div class="danger-actions">
          <div class="danger-item">
            <div class="danger-info">
              <h4>HesabÄ± Sil</h4>
              <p>TÃ¼m verileriniz kalÄ±cÄ± olarak silinecektir</p>
            </div>
            <button class="btn-danger" (click)="showDeleteAccountModal()" [disabled]="isLoading">
              <span class="icon">ğŸ—‘</span>
              HesabÄ± Sil
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>