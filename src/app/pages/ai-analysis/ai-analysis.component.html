<div class="ai-analysis-container">
  <h2 class="title">ğŸ“Š Yapay Zeka Anket Analizi</h2>
  <p class="description">
    Anket verilerinizi yapay zeka ile analiz edin, iÃ§gÃ¶rÃ¼ kazanÄ±n ve detaylÄ± raporlar alÄ±n.
  </p>

  <!-- Anket SeÃ§imi -->
  <div class="survey-selection">
    <mat-form-field appearance="outline" class="survey-select">
      <mat-label>Analiz iÃ§in anket seÃ§in</mat-label>
      <mat-select [(ngModel)]="selectedSurveyId" (selectionChange)="onSelectSurvey($event.value)">
        <mat-option *ngFor="let survey of surveys" [value]="survey.surveyId">
          {{ survey.title }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="loading-spinner">
    <mat-progress-spinner mode="indeterminate" diameter="60"></mat-progress-spinner>
    <p>Analiz oluÅŸturuluyor, lÃ¼tfen bekleyin...</p>
  </div>

  <!-- Hata MesajÄ± -->
  <mat-card *ngIf="errorMessage" class="error-card">
    <mat-icon color="warn">error_outline</mat-icon>
    <span>{{ errorMessage }}</span>
  </mat-card>

  <!-- Analiz Sonucu -->
  <div *ngIf="parsedAnalysis" class="analysis-results">
    
    <!-- Analiz BaÅŸlÄ±ÄŸÄ± ve Meta Bilgiler -->
    <mat-card class="header-card">
      <div class="analysis-header">
        <h3>ğŸ“‘ {{ parsedAnalysis.metadata.surveyTitle }}</h3>
        <div class="metadata">
          <span class="generated-date">ğŸ“… {{ parsedAnalysis.metadata.generatedAt }}</span>
          <span class="confidence-level">ğŸ¯ GÃ¼ven Seviyesi: {{ parsedAnalysis.metadata.confidenceLevel * 100 | number:'1.0-0' }}%</span>
        </div>
      </div>
    </mat-card>

    <!-- Ã–zet -->
    <mat-card class="summary-card">
      <div class="card-header">
        <h4>ğŸ“‹ Analiz Ã–zeti</h4>
      </div>
      <div class="card-content">
        <p class="summary-text">{{ parsedAnalysis.summary }}</p>
      </div>
    </mat-card>

    <!-- Ä°Ã§gÃ¶rÃ¼ler -->
    <mat-card class="insights-card" *ngIf="parsedAnalysis.insights.length > 0">
      <div class="card-header">
        <h4>ğŸ’¡ Ã–nemli Ä°Ã§gÃ¶rÃ¼ler</h4>
      </div>
      <div class="card-content">
        <ul class="insights-list">
          <li *ngFor="let insight of parsedAnalysis.insights" class="insight-item">
            {{ insight }}
          </li>
        </ul>
      </div>
    </mat-card>

    <!-- Ã–neriler -->
    <mat-card class="recommendations-card" *ngIf="parsedAnalysis.recommendations.length > 0">
      <div class="card-header">
        <h4>ğŸ¯ Ã–neriler</h4>
      </div>
      <div class="card-content">
        <ul class="recommendations-list">
          <li *ngFor="let recommendation of parsedAnalysis.recommendations" class="recommendation-item">
            {{ recommendation }}
          </li>
        </ul>
      </div>
    </mat-card>

  </div>
</div>
